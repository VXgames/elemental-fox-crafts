<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#bcb893">
    <link rel="manifest" href="/manifest.json">
    <!-- Security Headers (Meta tags - fallback if server headers not configured) -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://www.google-analytics.com https://js.stripe.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https://www.google-analytics.com https://api.emailjs.com https://api.stripe.com; frame-src https://js.stripe.com; object-src 'none'; base-uri 'self'; form-action 'self';">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <!-- SEO Meta Tags -->
    <meta name="description" content="Review your shopping cart and proceed to checkout at Elemental Fox Crafts.">
    <meta name="keywords" content="handmade, artisanal, crafts, weaving tools, copper works, wands, cat toys, knives">
    <meta name="author" content="Elemental Fox Crafts">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://elementalfoxcrafts.com/">
    <meta property="og:title" content="Shopping Cart - Elemental Fox Crafts">
    <meta property="og:description" content="Review your shopping cart and proceed to checkout at Elemental Fox Crafts.">
    <meta property="og:image" content="https://elementalfoxcrafts.com/assets/Logo/VectorFoxwhite.png">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://elementalfoxcrafts.com/">
    <meta property="twitter:title" content="Shopping Cart - Elemental Fox Crafts">
    <meta property="twitter:description" content="Review your shopping cart and proceed to checkout at Elemental Fox Crafts.">
    <meta property="twitter:image" content="https://elementalfoxcrafts.com/assets/Logo/VectorFoxwhite.png">

    <title>Cart - Elemental Fox Crafts</title>
    <style>
        body{background:#fff;background-attachment:fixed}
        #css-warning{display:block;background:#ffdede;color:#550000;padding:.6rem;text-align:center;font-weight:700;border-radius:6px}
        /* CRITICAL: Hide desktop icons on mobile IMMEDIATELY to prevent FOUC */
        @media (max-width: 768px) {
            .header-desktop-only,.desktop-only,header .header-desktop-only,header .desktop-only{display:none!important;visibility:hidden!important;opacity:0!important;pointer-events:none!important;position:absolute!important;left:-99999px!important;top:-99999px!important;width:0!important;height:0!important;overflow:hidden!important}
            .header-desktop-only *,.desktop-only *,header .header-desktop-only *,header .desktop-only *{display:none!important;visibility:hidden!important;opacity:0!important;pointer-events:none!important}
        }
    </style>
    <!-- Preload critical resources -->
    <link rel="preload" href="./style.css" as="style">
    
    <link rel="stylesheet" href="./style.css" type="text/css">
    <!-- Optimize font loading with font-display swap -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Inter:wght@300;400;500&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Inter:wght@300;400;500&display=swap" rel="stylesheet"></noscript>

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0VQFKJ0FBJ"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-0VQFKJ0FBJ');
    </script>
</head>
<body>
    <div id="css-warning">Stylesheet not loaded — using fallback styles. If you see this, check the CSS link or server.</div>
    <header>
        <nav class="navbar">
            <a href="index.html" class="nav-brand">
                <img src="./assets/Logo/VectorFoxwhite.png" alt="Elemental Fox Crafts Logo" class="logo">
                <h1>Elemental Fox Crafts</h1>
            </a>
            <button class="mobile-menu-toggle" aria-label="Toggle navigation menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-links">
                <li class="nav-item"><a href="index.html">Home</a></li>
                <li class="nav-item nav-mega" role="menuitem">
                    <a href="shop.html" aria-haspopup="true" aria-expanded="false" aria-label="Shop - Click to view categories">Shop</a>
                    <div class="mega-dropdown" role="menu" aria-label="Shop Categories and Featured Items">
                        <div class="mega-dropdown-inner">
                            <div class="mega-left">
                                <ul class="mega-categories" role="list" aria-label="Product Categories">
                                    <li><a href="category-weaving.html" role="menuitem">Weaving Tools</a></li>
                                    <li><a href="category-copper.html" role="menuitem">Copper Works</a></li>
                                    <li><a href="category-wands.html" role="menuitem">Wands</a></li>
                                    <li><a href="category-cattoys.html" role="menuitem">Cat Toys</a></li>
                                    <li><a href="category-knives.html" role="menuitem">Knives</a></li>
                                </ul>
                            </div>
                            <div class="mega-right">
                                <!-- Featured items will be loaded dynamically by featured-items.js -->
                            </div>
                        </div>
                    </div>
                </li>
                <li class="nav-item"><a href="commissions.html">Commissions</a></li>
                <li class="nav-item"><a href="about.html">About</a></li>
                <li class="nav-item"><a href="contact.html">Contact</a></li>
                <li class="nav-item mobile-instagram-item">
                    <a href="https://www.instagram.com/elementalfoxcrafts/" target="_blank" rel="noopener noreferrer" class="mobile-instagram-icon" aria-label="Visit our Instagram">
                        <img src="./assets/icons/Instagram.png" alt="Instagram">
                    </a>
                </li>
            </ul>
        </nav>
        <div class="header-desktop-only desktop-only">
        <div class="header-search-container">
            <input type="search" id="header-search" class="header-search" placeholder="Search products..." aria-label="Search products">
            <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
            </svg>
        </div>
        <a href="wishlist.html" class="wishlist-toggle" aria-label="View wishlist">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="28" height="28" aria-hidden="true" focusable="false">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
            <span class="wishlist-badge">0</span>
        </a>
        <button class="cart-toggle" aria-label="Open shopping cart">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            <span class="cart-badge">0</span>
        </button>
        <a href="https://www.instagram.com/elementalfoxcrafts/" target="_blank" rel="noopener noreferrer" class="header-instagram-icon" aria-label="Visit our Instagram">
            <img src="./assets/icons/Instagram.png" alt="Instagram">
        </a>
        </div>
    </header>

    <!-- Cart Overlay -->
    <div class="cart-overlay"></div>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar">
        <div class="cart-header">
            <h2>Shopping Cart</h2>
            <button class="cart-close" aria-label="Close cart">×</button>
        </div>
        <div class="cart-content">
            <div class="cart-empty">
                <p>Your cart is empty</p>
                <p style="font-size: 0.9rem; color: var(--muted);">Add items to get started</p>
            </div>
            <div class="cart-items">
                <!-- Cart items will be dynamically added here -->
            </div>
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span class="cart-total-label">Total:</span>
                <span class="cart-total-amount">$0.00</span>
            </div>
            <button class="cart-checkout-btn">Proceed to Checkout</button>
        </div>
    </div>

    <main id="main-content" role="main">
        <section class="page-header">
            <h2>Your Cart</h2>
        </section>
        <section class="cart-page-content">
            <div class="cart-page-container">
                <div class="cart-page-main">
                    <div id="cart-page-empty" class="cart-page-empty" style="display: none;">
                        <h3>Your cart is empty</h3>
                        <p>Continue browsing to add items to your cart.</p>
                        <a href="shop.html" class="btn-primary">Continue Shopping</a>
                    </div>
                    
                    <div id="cart-page-items" class="cart-page-items">
                        <!-- Cart items will be loaded here -->
                    </div>
                </div>
                
                <div class="cart-page-sidebar">
                    <div class="cart-summary">
                        <h3>Order Summary</h3>
                        
                        <div class="summary-row">
                            <span>Subtotal:</span>
                            <span id="cart-subtotal">$0.00</span>
                        </div>
                        
                        <div class="shipping-estimate">
                            <h4>Estimate Shipping</h4>
                            <div class="form-group">
                                <label for="shipping-country">Country</label>
                                <select id="shipping-country" name="shippingCountry">
                                    <option value="US">United States</option>
                                    <option value="CA">Canada</option>
                                    <option value="UK">United Kingdom</option>
                                    <option value="AU">Australia</option>
                                    <option value="OTHER">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="shipping-state">State/Province</label>
                                <input type="text" id="shipping-state" name="shippingState" placeholder="Enter state or province">
                            </div>
                            <div class="form-group">
                                <label for="shipping-zip">Postal/Zip Code</label>
                                <input type="text" id="shipping-zip" name="shippingZip" placeholder="Enter postal code">
                            </div>
                            <button id="calculate-shipping-btn" class="btn-secondary">Calculate Shipping</button>
                            <div id="shipping-result" class="shipping-result" style="display: none;">
                                <div class="shipping-option">
                                    <span>Standard Shipping</span>
                                    <span id="shipping-cost">$0.00</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="summary-row">
                            <span>Shipping:</span>
                            <span id="cart-shipping">$0.00</span>
                        </div>
                        
                        <div class="summary-row summary-total">
                            <span>Total:</span>
                            <span id="cart-total">$0.00</span>
                        </div>
                        
                        <button id="proceed-to-checkout-btn" class="btn-primary checkout-btn-large">Proceed to Checkout</button>
                        <a href="shop.html" class="continue-shopping-link">Continue Shopping</a>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <a href="https://www.instagram.com/elementalfoxcrafts/" target="_blank" rel="noopener noreferrer" class="social-icon instagram-icon-footer" aria-label="Visit our Instagram">
            <img src="./assets/icons/Instagram.png" alt="Instagram">
        </a>
        <p>&copy; 2024 Elemental Fox Crafts. All rights reserved.</p>
    </footer>
    <!-- PWA installation and service worker registration -->
    <script src="./assets/js/pwa-install.js" defer></script>
    <!-- Performance optimizer must load first -->
    <script src="./assets/js/performance-optimizer.js" defer></script>
    <script src="./assets/js/security.js" defer></script>
    <script src="./assets/js/accessibility.js" defer></script>
    <script src="./assets/js/menu.js" defer></script>
    <script src="./assets/js/error-handler.js" defer></script>
    <script src="./assets/js/toast-messages.js" defer></script>
    <script src="./assets/js/featured-items.js" defer></script>
    <script src="./assets/js/cart.js" defer></script>
    <script src="./assets/js/wishlist.js" defer></script>
    <script src="./assets/js/cart-page.js" defer></script>
</body>
</html>

